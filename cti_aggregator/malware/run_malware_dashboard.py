#!/usr/bin/env python3

"""
Launcher script for the Malware Family Dashboard.
This script makes it easy to start the Streamlit dashboard.
"""

import os
import sys
import subprocess

def main():
    """
    Launch the Streamlit dashboard.
    """
    # Get the current directory
    current_dir = os.path.dirname(os.path.abspath(__file__))
    
    # Path to the dashboard script
    dashboard_path = os.path.join(current_dir, "dashboards", "malware_dashboard.py")
    
    print("Starting Malware Family Dashboard...")
    print(f"Dashboard located at: {dashboard_path}")
    
    try:
        # Check if Streamlit is installed
        try:
            import streamlit
            print("Streamlit is already installed.")
        except ImportError:
            print("Streamlit is not installed. Installing requirements...")
            requirements_path = os.path.join(current_dir, "dashboards", "requirements.txt")
            subprocess.check_call([sys.executable, "-m", "pip", "install", "-r", requirements_path])
            print("Requirements installed successfully.")
        
        # Launch the Streamlit dashboard
        print("\nLaunching dashboard...")
        print("Dashboard will be available at http://localhost:8501\n")
        
        # Use subprocess to run streamlit
        subprocess.run(["streamlit", "run", dashboard_path])
        
    except Exception as e:
        print(f"Error launching dashboard: {str(e)}")
        print("\nTo manually start the dashboard, run:")
        print(f"  cd {current_dir}")
        print("  streamlit run dashboards/malware_dashboard.py")

if __name__ == "__main__":
    main() 